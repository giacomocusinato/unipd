import java.lang.String;import java.util.*;public class Agenzia {    public static void main(String[] a){        Viaggio v = new Viaggio("Namibia",4);        Persona p1 = new Persona("Alice", v);        Persona p2 = new Persona("Bob", v);        Persona p3 = new Persona("Carl", v);        Persona p4 = new Persona("Doug", v);        Persona p5 = new Persona("Eric", v);        Persona p6 = new Persona("Frank", v);        p1.start(); p2.start(); p3.start();        p4.start(); p5.start(); p6.start();        try {            Thread.sleep(200);        } catch (Exception e) { }        v.chiudi();    }}class Viaggio {    String destinazione;    int minIscritti;    boolean confermato = false;    List<Persona> iscritti = new ArrayList<Persona>();    class Notifica extends Thread {        private Persona persona;        public Notifica(Persona p) { persona = p; }        public void run() {            synchronized(iscritti) {                for (Persona p : iscritti) {                    if (p.getNome() != persona.getNome()) {                        p.conferma();                        try {                            p.notifyAll();                        } catch (Exception ex) { System.out.println("Notifica non riuscita"); }                    }                }            }        }    }    public Viaggio(String dest, int min) {        destinazione = dest;        minIscritti = min;    }    public boolean prenota(Persona p) {        iscritti.add(p);        if (iscritti.size() >= minIscritti) {            confermato = true;            Thread t = new Notifica(p);            t.start();        }        return confermato;    }    public void chiudi() {        if (confermato) {            System.out.println("Viaggio confermato");        } else { System.out.println("Viaggio annullato"); }    }    public String getDestinazione() { return destinazione; }}class Persona extends Thread {    String nome;    Viaggio viaggio;    boolean prenotato = false;    boolean chiuso = false;    public Persona(String n, Viaggio v) {        nome = n;        viaggio = v;    }    public String getNome() { return nome; }    public void run() {        synchronized(this) {            prenotato = viaggio.prenota(this);            while (!prenotato && !chiuso) {                try {                    wait();                } catch(Exception ex) { }            }            if (prenotato) {                System.out.println(nome + "ha avuto conferma del viaggio");            };            if (chiuso) {                System.out.println(nome + "ha avuto conferma dell'annullamento");            }        }    }    public void conferma() {        try {            synchronized(this) { prenotato = true; }        } catch (Exception ex) { }    }    public void chiudi() {        try {            synchronized(this) { chiuso = true; }        } catch (Exception ex) { }    }}